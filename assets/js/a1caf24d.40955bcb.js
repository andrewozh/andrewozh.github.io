"use strict";(self.webpackChunkdevops_sandbox=self.webpackChunkdevops_sandbox||[]).push([[9881],{1869:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"observability/metrics/prometheus-stack-architecture","title":"Prometheus Stack Architecture","description":"Source A Complete Guide","source":"@site/docs/observability/metrics/prometheus-stack-architecture.md","sourceDirName":"observability/metrics","slug":"/observability/metrics/prometheus-stack-architecture","permalink":"/docs/observability/metrics/prometheus-stack-architecture","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Grafana","permalink":"/docs/observability/metrics/grafana"},"next":{"title":"Prometheus","permalink":"/docs/observability/metrics/prometheus"}}');var t=s(4848),n=s(8453);const l={},c="Prometheus Stack Architecture",a={},o=[{value:"Prometheus Server",id:"prometheus-server",level:2},{value:"Time-Series Database (TSDB)",id:"time-series-database-tsdb",level:2},{value:"Targets",id:"targets",level:2},{value:"Exporters",id:"exporters",level:2},{value:"Service Discovery",id:"service-discovery",level:2},{value:"Push Gateway",id:"push-gateway",level:2},{value:"Client Libraries",id:"client-libraries",level:2},{value:"Alert Manager",id:"alert-manager",level:2},{value:"PromQL",id:"promql",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"prometheus-stack-architecture",children:"Prometheus Stack Architecture"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://devopscube.com/prometheus-architecture/",children:"Source: Learn Prometheus Architecture: A Complete Guide"})}),"\n",(0,t.jsx)(r.p,{children:"Prometheus is an open-source monitoring and alerting system written in Go that collects and processes metrics from various targets using a pull model."}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"arch",src:s(9762).A+"",width:"1280",height:"720"})}),"\n",(0,t.jsx)(r.h2,{id:"prometheus-server",children:"Prometheus Server"}),"\n",(0,t.jsxs)(r.p,{children:["Uses ",(0,t.jsx)(r.strong,{children:"pull"})," model for scraping metrics from ",(0,t.jsx)(r.strong,{children:"targets"})," based on scrape intervals"]}),"\n",(0,t.jsx)(r.h2,{id:"time-series-database-tsdb",children:"Time-Series Database (TSDB)"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Stores metric data in efficient ",(0,t.jsx)(r.strong,{children:"chunks"})," on local disk"]}),"\n",(0,t.jsxs)(r.li,{children:["Supports ",(0,t.jsx)(r.strong,{children:"retention policies"}),":","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Time-based: Default 15 days"}),"\n",(0,t.jsx)(r.li,{children:"Size-based: Maximum storage limit"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.li,{children:"Offers remote storage options for scalability"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"targets",children:"Targets"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Sources where Prometheus scrapes metrics (servers, pods, endpoints)"}),"\n",(0,t.jsxs)(r.li,{children:["Default metrics path: ",(0,t.jsx)(r.code,{children:"/metrics"})]}),"\n",(0,t.jsxs)(r.li,{children:["Configured under ",(0,t.jsx)(r.code,{children:"scrape_configs"})," in config file"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"exporters",children:"Exporters"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Agents"})," that convert system metrics to Prometheus format"]}),"\n",(0,t.jsx)(r.li,{children:"Examples: Node Exporter (CPU/memory), ElastiSearch Exporter"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"service-discovery",children:"Service Discovery"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Static configs: targets with static endpoints"}),"\n",(0,t.jsx)(r.li,{children:"Dynamic discovery: For auto-scaling systems (Kubernetes, EC2, Consul)"}),"\n",(0,t.jsxs)(r.li,{children:["Example: ",(0,t.jsx)(r.code,{children:"kubernetes_sd_configs"})," for Kubernetes pods"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"push-gateway",children:"Push Gateway"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Handles push-based metrics for short-lived jobs"}),"\n",(0,t.jsx)(r.li,{children:"Acts as intermediate gateway"}),"\n",(0,t.jsx)(r.li,{children:"Jobs push metrics via HTTP API"}),"\n",(0,t.jsx)(r.li,{children:"Stores metrics temporarily in memory"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"client-libraries",children:"Client Libraries"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Libraries for custom instrumentation"}),"\n",(0,t.jsx)(r.li,{children:"Available for most programming languages"}),"\n",(0,t.jsx)(r.li,{children:"Used to expose custom metrics in Prometheus format"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"alert-manager",children:"Alert Manager"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Manages alerts from Prometheus"}),"\n",(0,t.jsx)(r.li,{children:"Features: Deduplication, Grouping, Silencing, Routing by severity, Inhibition"}),"\n",(0,t.jsx)(r.li,{children:"Supports multiple notification channels (email, Slack, PagerDuty)"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"promql",children:"PromQL"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Query language for time-series data"}),"\n",(0,t.jsx)(r.li,{children:"Used in Prometheus UI, CLI, or Grafana dashboards"}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>l,x:()=>c});var i=s(6540);const t={},n=i.createContext(t);function l(e){const r=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(n.Provider,{value:r},e.children)}},9762:(e,r,s)=>{s.d(r,{A:()=>i});const i=s.p+"assets/images/prometheus-architecture-a75d8c34726d3ed02fdf01d58bea7701.gif"}}]);