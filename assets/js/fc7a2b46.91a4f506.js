"use strict";(self.webpackChunkdevops_sandbox=self.webpackChunkdevops_sandbox||[]).push([[5204],{4310:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"observability/metrics/grafana","title":"Grafana","description":"|Distro|Grafana|","source":"@site/docs/observability/metrics/grafana.md","sourceDirName":"observability/metrics","slug":"/observability/metrics/grafana","permalink":"/docs/observability/metrics/grafana","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"tool","permalink":"/docs/tags/tool"},{"inline":true,"label":"distro","permalink":"/docs/tags/distro"},{"inline":true,"label":"grafana","permalink":"/docs/tags/grafana"},{"inline":true,"label":"metrics","permalink":"/docs/tags/metrics"},{"inline":true,"label":"observability","permalink":"/docs/tags/observability"}],"version":"current","frontMatter":{"tags":["tool","distro","grafana","metrics","observability"]},"sidebar":"tutorialSidebar","previous":{"title":"DataDog","permalink":"/docs/observability/metrics/datadog"},"next":{"title":"Prometheus","permalink":"/docs/observability/metrics/prometheus"}}');var r=n(4848),t=n(8453);const i={tags:["tool","distro","grafana","metrics","observability"]},d="Grafana",l={},c=[{value:"Setup",id:"setup",level:2},{value:"Usecases",id:"usecases",level:2},{value:"\u2705 Basic: add dashboards",id:"white_check_mark-basic-add-dashboards",level:3},{value:"Common: manage dashboards",id:"common-manage-dashboards",level:3},{value:"\u2705 Monitoring",id:"white_check_mark-monitoring",level:2},{value:"Maintenence",id:"maintenence",level:2},{value:"Articles",id:"articles",level:2}];function o(e){const a={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"grafana",children:"Grafana"})}),"\n",(0,r.jsxs)(a.table,{children:[(0,r.jsx)(a.thead,{children:(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.th,{children:(0,r.jsx)(a.strong,{children:"Distro"})}),(0,r.jsx)(a.th,{children:(0,r.jsx)(a.a,{href:"https://grafana.com",children:"Grafana"})})]})}),(0,r.jsxs)(a.tbody,{children:[(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"Type"})}),(0,r.jsx)(a.td,{children:"deployment"})]}),(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"Deploy"})}),(0,r.jsx)(a.td,{children:"helm-chart"})]}),(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"Docs"})}),(0,r.jsx)(a.td,{children:(0,r.jsx)(a.a,{href:"https://grafana.com/docs/grafana/latest/",children:"link"})})]}),(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"Backup"})}),(0,r.jsx)(a.td,{})]}),(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"Scaling"})}),(0,r.jsx)(a.td,{})]}),(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"CLI"})}),(0,r.jsx)(a.td,{})]}),(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"UI"})}),(0,r.jsx)(a.td,{children:"web"})]})]})]}),"\n",(0,r.jsx)(a.h2,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-yaml",children:"  grafana:\n    defaultDashboardsEnabled: false\n    serviceMonitor:\n      enabled: false\n"})}),"\n",(0,r.jsx)(a.h2,{id:"usecases",children:"Usecases"}),"\n",(0,r.jsxs)(a.h3,{id:"white_check_mark-basic-add-dashboards",children:["\u2705"," Basic: add dashboards"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsxs)(a.p,{children:["search dashboard ",(0,r.jsx)(a.a,{href:"https://grafana.com/grafana/dashboards/",children:"https://grafana.com/grafana/dashboards/"})]}),"\n"]}),"\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsxs)(a.p,{children:["download JSON and put it into ",(0,r.jsx)(a.code,{children:"kube-prometheus-stack/dashboards/"})," directory"]}),"\n"]}),"\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsxs)(a.p,{children:["template automatically put it in grafana as configmap with special label ",(0,r.jsx)(a.code,{children:'grafana_dashboard: "1"'})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-yaml",children:'{{ range $path, $_ :=  .Files.Glob  "dashboards/**.json" }}\n{{ $name := $path | trimPrefix "dashboards/" }}\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  namespace: monitoring\n  name: dashboard-{{ $name | trimSuffix ".json" }}\n  labels:\n    grafana_dashboard: "1"\n  annotations:\n    argocd.argoproj.io/sync-options: ServerSideApply=true\ndata:\n  {{ $name }}: |\n{{ $.Files.Get $path | nindent 4 }}\n{{ end }}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"common-manage-dashboards",children:"Common: manage dashboards"}),"\n",(0,r.jsxs)(a.h2,{id:"white_check_mark-monitoring",children:["\u2705"," Monitoring"]}),"\n",(0,r.jsx)(a.admonition,{title:"Grafana Dashboard",type:"note",children:(0,r.jsx)(a.p,{children:(0,r.jsx)(a.a,{href:"https://grafana.com/grafana/dashboards/22064-internal-grafana-stats/",children:"https://grafana.com/grafana/dashboards/22064-internal-grafana-stats/"})})}),"\n",(0,r.jsx)(a.h2,{id:"maintenence",children:"Maintenence"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Backup / Restore"}),"\n",(0,r.jsx)(a.li,{children:"Scaling"}),"\n",(0,r.jsx)(a.li,{children:"Upgrade"}),"\n"]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h2,{id:"articles",children:"Articles"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.a,{href:"/docs/observability/metrics/articles/prometheus-stack-architecture",children:"Prometheus Stack Architecture"})}),"\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.a,{href:"/docs/observability/metrics/articles/grafana-dashboard-patcher",children:"Grafana Dashboard patcher"})}),"\n"]})]})}function h(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>d});var s=n(6540);const r={},t=s.createContext(r);function i(e){const a=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(t.Provider,{value:a},e.children)}}}]);